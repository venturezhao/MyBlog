---
title: 毕设一月，贴调试笔记，回家喽
date: 2007-08-31 00:00:00
tags: Mood
categories: 心情
---

2007-08-01 18:07  
终于找到VC下算法的问题了~原来LMS算法对自相关性比较强的信号收敛效果那么不明显啊.它可以将冲击响应分解成多个,并且使时域波形仍旧保持一致.  
难道说在满足单一频率下系统传函不变,系统的冲击响应可以有很多表现形式.系统能控能观是否如此有关呢?还是在单一频率下,系统误差曲面上有好多极小点都趋近于0?  
是否有其他自适应滤波器可以求出在此情况下的系统唯一的传递函数呢?ms不太可能.

btw:呵呵\~~有时候发现自己都成了睡罗汉了...明天开始,清醒!

<!--more-->

2007-08-05  17:41  
AIC部分的DSP程序 第一版完工.第一版里面实现了对AD,程控运放,片内外设Timer0,SPI口的操作,并且都调试成功了.底层硬件部分还有串口需要完成.  
AWG部分刚刚搭完了框架.  
现在比较迷茫的是: 为了结构清晰,我特地将底层函数都封装了起来,但是封装到中断的时候,由于中断服务程序与控制逻辑联系非常紧密,我应该将它写进子函数当作lib来看待呢.还是写在控制算法中去,当作控制算法中的函数来看待...伤脑筋啊.

2007-08-07  09:21  
AWG的硬件部分业已调试通过.今天这是总结一下昨天所做的工作.SPI接收FIFO寄存器中影响因子配置为1方可,否则他会一直进中断而无法执行其他程序~  
AWG版本升级到1.0.1了~~ 完成它的功能吧~

2007-08-08  14:17  
AWG的控制算法终于写完了.不过正确与否还有待检验~算是搞明白了Flash分配那个部分的功能,挺好玩,挺好用~嘻嘻  
下来写AIC相关的东西了.

2007-08-08  23:06  
呵呵\~~终于解决了一个困扰了好久的问题.看门狗和复位线...没相当他居然没焊上...看门狗这种rubbish...谁还用啊!.焊掉.  
还有就是AWG模块基本完成了\~~下来主要就是好好做算法了~~  
下雨了...哈哈\~~好天气~好心情~

2007-08-09  17:25  
啊...今天的GPIO口配置的好是郁闷...他们居然受EALLOW和EDIS保护.之前对照例程看了800遍居然没认出来...惭愧啊...

2007-08-09  21:02  
博士师兄远道而来, 问了问他的算法的一些问题. 虽然不大,但也算有些收获.我还是先把最基本的算法实现再说啦~  
晚上校准了下AD的采集通道.4层的板子,估计了一下.误差有20LSB,大约是1mV.不错.还可接受~~  
突然发现笔记变成流水帐了...明天在里面养乌龟..哈哈~~

2007-08-12  10:59  
一不留神第二天板子出问题了，唉。。。修了两天才能用。。。失败啊。。。  
不 过还有些问题值得商榷：为什么DSP复位后看门狗会自动开启？以前都是默认关着的哦。并且datasheet上也说默认为关的。下午去机械那边查查书，看复位时的跳线有没有问题吧。开机后为什么一定要手动加上10ms的延时？以前一直以为是给后续器件提供复位时间，不过从今天调板子的情况来看，ms是DSP自己数据总线上的数据不对。还有数据总线上的电平怎么敢超过3.3V而直接飙升至4V!不烧片子才怪, 不过确实怪了...呵呵

2007-08-12  17:39  
AIC的串口调通了，呵呵~~ 下来该定协议啦~~ 自己的协议自己定就是爽，不过自由度太高了，定起来不免有些难以下手。好好考虑下~~  
AIC版本升级喽~~ 请客吃饭去喽~~

2007-08-13  04:02  
唉.鸡肋鸡肋啊....真是鸡肋啊...不知当时是怎么想的,心血来潮,学人家PC机干嘛...人家多任务,速度快,不在乎这点效率.你模拟出个缓冲区来,还没法子给人家定时刷新,不是找抽么...不过辛辛苦苦写了这么多了.就这么删了啊...可惜可惜...唉.

2007-08-15  14:28  
哈哈\~~半路杀出的程咬金终于被我干掉啦\~~再努力一下，把VC下的图形给画出来就perfect了~~  
DSP现在上电后必须先初始化了。。。还不知问题出在哪里。  
一个插着仿真器，另一个就不工作。这个怀疑是SPI口复位端一直为低造成的，加上拉电阻试试。。。

2007-08-15  16:50  
不容易啊不容易...终于完成了一个版本\~~VC写的上位机.DSP的下位机...  
可惜软件工程学的太不好...  
写的叫个乱啊...  
唉\~~呵呵~~  
不过不管怎么说,那过去交差先~~

2007-08-21  10:57  
怎么过去一个礼拜了?奇怪的很,得好好想想这一个礼拜都干嘛了...一个报告用的了这么久么?不对劲啊...  
唉,赶紧写吧...四天里要把这个算法实现了的.

2007-08-21  17:10  
功力恢复到七成了,coding这事情真是需要一口气冲到底的哦...啥时候我也闭关玩失踪\~~集中精神写完它!

2007-08-23  17:53  
协议算是初步定完了,唉,不能安心做一件事情就是倒霉. 今夜里一定要把那个网络的结了.明天专心实现算法.  
啊....呜....(狼嚎)...

2007-08-24  15:07  
网络还没有做完,唉.还得赔上一个晚上...不过看来一个人的思路确实好难转变的,这几天白天在航天学院这边做SPI,SCI的协议,总是在考虑一个 BYTE一个BYTE的事情,一下子去定网络的东西,思路没扭转过来,走了不小的弯路:网络通过TCP/IP协议栈已经实现了我SPI/SCI所做的工作.两边直接对等传输数据流或数据报格式的数据. 还有就是通过UNIX和Windows实现socket的途径,可以明显的看出他们的区别,呵呵\~~我怎么还是比较喜欢UNIX的实现方式...也许是因为socket本来就是UNIX定出的标准,自己实现起来一切都是那么优美,不会因为进程阻塞而出这样那样的问题. 惨了惨了,中毒不浅哦~~  
终于算是把AIC模块的协议给定完了,写个上位机.实现一下下算法吧\~~离闪人回家还有2天喽~~

2007-08-24  18:49  
算法部分还差两个函数没有实现,唉...流程算是写的差不多了,再写个上位机程序,连着调一下啦~~  
吃饭写网络去喽~~~

2007-08-25  12:54  
网络基本完成了。我的可怜的毕设啊。。。只好回家来了再继续了。。。  
bg:跳票...又是跳票...可怜我忠实的fans啊~~
